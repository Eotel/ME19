# ME19 ユーザーガイド

## 概要

ME19は、カメラから映像を取得し、その映像ストリーム内のQRコードを検出し、デコードしたデータをファイルに書き込むGoアプリケーションです。このガイドでは、ME19のインストール方法、設定方法、使用方法について説明します。

## インストール方法

### 前提条件

ME19を使用するには、以下のソフトウェアが必要です：

1. **Go 1.18以上**（1.24.1推奨）
2. **OpenCV 4.x**（4.11.0推奨）
3. **GoCV**（OpenCVのGoバインディング）

詳細なインストール手順については、[SETUP.md](../SETUP.md)を参照してください。

### バイナリからのインストール

最新のリリースバイナリは[GitHubリリースページ](https://github.com/eotel/me19/releases)からダウンロードできます。

各プラットフォーム向けのバイナリが提供されています：
- Windows: `me19_windows_amd64.exe`
- macOS: `me19_darwin_amd64`
- Linux: `me19_linux_amd64`

ダウンロードしたバイナリを実行可能にして、PATHの通ったディレクトリに配置してください。

### ソースからのビルド

ソースコードからME19をビルドするには：

```bash
# リポジトリのクローン
git clone https://github.com/eotel/me19.git
cd me19

# 依存関係のインストール
go mod download

# ビルド
go build -o me19 ./cmd/me19

# インストール（オプション）
go install ./cmd/me19
```

## 設定方法

ME19は、JSONファイルを使用して設定できます。デフォルトの設定ファイルは`configs/config.json`にあります。

### 設定ファイルの例

```json
{
  "camera": {
    "device_id": 0,
    "width": 1280,
    "height": 720,
    "fps": 30
  },
  "qrcode": {
    "scan_interval_ms": 500
  },
  "output_file": {
    "file_path": "qrcode_output.txt"
  }
}
```

### 設定パラメータ

#### カメラ設定

- `device_id`: カメラデバイスのID（通常、最初のカメラは0）
- `width`: キャプチャ解像度の幅（ピクセル）
- `height`: キャプチャ解像度の高さ（ピクセル）
- `fps`: フレームレート（フレーム/秒）

#### QRコード設定

- `scan_interval_ms`: QRコードスキャン間隔（ミリ秒）

#### 出力ファイル設定

- `file_path`: QRコードデータを書き込むファイルのパス

### コマンドライン引数

ME19は、以下のコマンドライン引数をサポートしています：

```
Usage: me19 [options]

Options:
  -c, --config string   設定ファイルのパス (デフォルト: "configs/config.json")
  -d, --device int      カメラデバイスID (デフォルト: 0)
  -o, --output string   出力ファイルパス
  -h, --help            ヘルプメッセージの表示
```

例：
```bash
# カスタム設定ファイルを使用
me19 --config my_config.json

# カメラデバイスIDを指定
me19 --device 1

# 出力ファイルを指定
me19 --output scan_results.txt
```

## 使用方法

### 基本的な使い方

1. ME19を起動します：
   ```bash
   me19
   ```

2. アプリケーションがカメラを起動し、QRコードのスキャンを開始します。

3. 検出されたQRコードのデータは、設定ファイルで指定されたファイル（デフォルトは`qrcode_output.txt`）に書き込まれます。

4. プログラムを終了するには、`Ctrl+C`を押します。

### 高度な使用例

#### 特定のカメラを使用

```bash
me19 --device 1
```

#### カスタム設定ファイルを使用

```bash
me19 --config my_settings.json
```

#### 出力ファイルを指定

```bash
me19 --output scan_data.txt
```

## トラブルシューティング

### カメラが見つからない場合

- カメラが正しく接続されていることを確認してください。
- 正しいデバイスIDを指定しているか確認してください。
- 他のアプリケーションがカメラを使用していないか確認してください。

### QRコードが検出されない場合

- QRコードがカメラの視野内にあることを確認してください。
- 十分な照明があることを確認してください。
- QRコードが鮮明で、歪みや反射がないことを確認してください。

### アプリケーションがクラッシュする場合

- OpenCVとGoCVが正しくインストールされていることを確認してください。
- 最新バージョンのME19を使用していることを確認してください。
- 詳細なエラーメッセージを確認し、必要に応じてIssueを報告してください。

## サポート

問題や質問がある場合は、[GitHubのIssueトラッカー](https://github.com/eotel/me19/issues)に報告してください。
